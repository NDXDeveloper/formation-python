# Exercice 1.3.3 : Jeu du plus ou moins

## Objectif

Cr√©er un jeu de devinette o√π l'ordinateur choisit un nombre secret et l'utilisateur doit le deviner avec des indices, en utilisant les boucles et les conditions.

## Cahier des charges

1. **L'ordinateur choisit un nombre** entre 1 et 50
2. **L'utilisateur doit deviner** avec des indices "plus grand" ou "plus petit"
3. **Limite √† 6 tentatives**
4. **Afficher le score** √† la fin

## Code de base √† compl√©ter

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Exercice 1.3.3 : Jeu du plus ou moins
Module 1.3 - Structures de contr√¥le (if/else, boucles)
"""

import random

def main():
    """Programme principal du jeu du plus ou moins."""
    print("üéØ === JEU DU PLUS OU MOINS ===")

    # TODO: G√©n√©rer un nombre secret

    # TODO: Initialiser les variables de jeu

    # TODO: Boucle de jeu principale

    # TODO: Afficher le score final

    pass

if __name__ == "__main__":
    main()
```

## Solution compl√®te

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Exercice 1.3.3 : Jeu du plus ou moins - SOLUTION
Module 1.3 - Structures de contr√¥le (if/else, boucles)
"""

import random

def generer_nombre_secret(min_val=1, max_val=50):
    """
    G√©n√®re un nombre secret al√©atoire.

    Args:
        min_val (int): Valeur minimale
        max_val (int): Valeur maximale

    Returns:
        int: Nombre secret g√©n√©r√©
    """
    return random.randint(min_val, max_val)

def demander_proposition():
    """
    Demande une proposition √† l'utilisateur avec validation.

    Returns:
        int: La proposition ou None si annul√©e
    """
    while True:
        try:
            proposition = int(input("ü§î Votre proposition : "))
            return proposition
        except ValueError:
            print("‚ùå Veuillez entrer un nombre entier")
        except KeyboardInterrupt:
            print("\n‚èπÔ∏è Jeu abandonn√©")
            return None

def donner_indice(proposition, nombre_secret):
    """
    Donne un indice bas√© sur la proposition.

    Args:
        proposition (int): Proposition de l'utilisateur
        nombre_secret (int): Nombre √† deviner

    Returns:
        str: Type d'indice ("trouve", "plus_grand", "plus_petit")
    """
    if proposition == nombre_secret:
        return "trouve"
    elif proposition < nombre_secret:
        return "plus_grand"
    else:
        return "plus_petit"

def calculer_score(tentatives_utilisees, max_tentatives):
    """
    Calcule le score bas√© sur le nombre de tentatives.

    Args:
        tentatives_utilisees (int): Nombre de tentatives utilis√©es
        max_tentatives (int): Nombre maximum de tentatives

    Returns:
        int: Score sur 100
    """
    if tentatives_utilisees == 1:
        return 100  # Score parfait
    elif tentatives_utilisees <= max_tentatives:
        # Score d√©gressif selon les tentatives
        return max(0, 100 - (tentatives_utilisees - 1) * 15)
    else:
        return 0  # Pas trouv√©

def afficher_resultats(gagne, tentatives, nombre_secret, score):
    """
    Affiche les r√©sultats de la partie.

    Args:
        gagne (bool): Si le joueur a gagn√©
        tentatives (int): Nombre de tentatives utilis√©es
        nombre_secret (int): Le nombre secret
        score (int): Score obtenu
    """
    print("\n" + "="*40)
    print("üéØ === R√âSULTATS DE LA PARTIE ===")
    print("="*40)

    if gagne:
        print("üéâ F√âLICITATIONS ! Vous avez trouv√© !")
        print(f"üéØ Nombre secret : {nombre_secret}")
        print(f"üî¢ Tentatives utilis√©es : {tentatives}")
        print(f"‚≠ê Score : {score}/100")

        # Messages selon les performances
        if tentatives == 1:
            print("üèÜ INCROYABLE ! Trouv√© du premier coup !")
        elif tentatives <= 3:
            print("ü•à Excellent ! Tr√®s peu de tentatives !")
        elif tentatives <= 5:
            print("ü•â Bien jou√© ! Performance correcte !")
        else:
            print("üëç Trouv√© de justesse !")
    else:
        print("üòû Dommage ! Vous n'avez pas trouv√©...")
        print(f"üéØ Le nombre secret √©tait : {nombre_secret}")
        print(f"üî¢ Tentatives utilis√©es : {tentatives}")
        print(f"‚≠ê Score : {score}/100")
        print("üí™ R√©essayez pour faire mieux !")

def main():
    """Programme principal du jeu du plus ou moins."""
    print("üéØ === JEU DU PLUS OU MOINS ===")
    print("Devinez le nombre secret entre 1 et 50 !")
    print("Vous avez 6 tentatives maximum.")

    # Configuration du jeu
    MIN_NOMBRE = 1
    MAX_NOMBRE = 50
    MAX_TENTATIVES = 6

    # G√©n√©rer le nombre secret
    nombre_secret = generer_nombre_secret(MIN_NOMBRE, MAX_NOMBRE)

    # Variables de jeu
    tentatives = 0
    gagne = False
    propositions_precedentes = []

    print(f"\nüéÆ Le nombre secret est entre {MIN_NOMBRE} et {MAX_NOMBRE}")
    print("üí° Je vous dirai si c'est plus grand ou plus petit !")

    # Boucle de jeu principale
    while tentatives < MAX_TENTATIVES and not gagne:
        tentatives += 1

        print(f"\n--- Tentative {tentatives}/{MAX_TENTATIVES} ---")

        # Afficher les propositions pr√©c√©dentes
        if propositions_precedentes:
            print(f"üìù Vos propositions pr√©c√©dentes : {propositions_precedentes}")

        # Demander une proposition
        proposition = demander_proposition()

        if proposition is None:  # Jeu abandonn√©
            return

        # Ajouter √† l'historique
        propositions_precedentes.append(proposition)

        # V√©rifier la proposition
        indice = donner_indice(proposition, nombre_secret)

        if indice == "trouve":
            gagne = True
            print("üéâ BRAVO ! Vous avez trouv√© !")
        elif indice == "plus_grand":
            print("üìà C'est plus grand !")
        else:  # plus_petit
            print("üìâ C'est plus petit !")

        # Donner des indices suppl√©mentaires
        if not gagne and tentatives < MAX_TENTATIVES:
            ecart = abs(proposition - nombre_secret)
            if ecart <= 2:
                print("üî• Vous √™tes tr√®s proche !")
            elif ecart <= 5:
                print("üå°Ô∏è Vous √™tes proche !")
            elif ecart <= 10:
                print("üéØ Vous vous rapprochez !")
            else:
                print("‚ùÑÔ∏è Vous √™tes loin...")

    # Calcul du score
    score = calculer_score(tentatives if gagne else MAX_TENTATIVES + 1, MAX_TENTATIVES)

    # Affichage des r√©sultats
    afficher_resultats(gagne, tentatives, nombre_secret, score)

def version_avancee():
    """Version avanc√©e avec plus d'options."""
    print("üéØ === JEU DU PLUS OU MOINS AVANC√â ===")

    # Configuration personnalisable
    try:
        min_nombre = int(input("Nombre minimum (d√©faut: 1) : ") or "1")
        max_nombre = int(input("Nombre maximum (d√©faut: 100) : ") or "100")
        max_tentatives = int(input("Nombre de tentatives (d√©faut: 7) : ") or "7")

        if min_nombre >= max_nombre:
            print("‚ùå Plage invalide")
            return

        if max_tentatives < 1:
            print("‚ùå Nombre de tentatives invalide")
            return

    except ValueError:
        print("‚ùå Configuration invalide")
        return

    # Calcul de la difficult√©
    plage = max_nombre - min_nombre + 1
    difficulte_theorique = plage.bit_length()  # Log2 de la plage

    print(f"\nüéÆ Configuration :")
    print(f"   üìä Plage : {min_nombre} √† {max_nombre} ({plage} nombres)")
    print(f"   üéØ Tentatives : {max_tentatives}")
    print(f"   ‚ö° Difficult√© th√©orique : {difficulte_theorique} tentatives optimales")

    if max_tentatives < difficulte_theorique:
        print("   üî• D√©fi DIFFICILE !")
    elif max_tentatives == difficulte_theorique:
        print("   ‚öñÔ∏è D√©fi √âQUILIBR√â")
    else:
        print("   üòä D√©fi FACILE")

    # Jeu avec configuration personnalis√©e
    nombre_secret = random.randint(min_nombre, max_nombre)
    tentatives = 0
    gagne = False
    propositions = []

    while tentatives < max_tentatives and not gagne:
        tentatives += 1
        print(f"\n--- Tentative {tentatives}/{max_tentatives} ---")

        if propositions:
            print(f"üìù Historique : {propositions}")

        try:
            proposition = int(input(f"ü§î Nombre entre {min_nombre} et {max_nombre} : "))

            if not min_nombre <= proposition <= max_nombre:
                print(f"‚ùå Le nombre doit √™tre entre {min_nombre} et {max_nombre}")
                tentatives -= 1  # Ne pas compter cette tentative
                continue

        except ValueError:
            print("‚ùå Nombre invalide")
            tentatives -= 1  # Ne pas compter cette tentative
            continue
        except KeyboardInterrupt:
            print("\n‚èπÔ∏è Jeu abandonn√©")
            return

        propositions.append(proposition)

        if proposition == nombre_secret:
            gagne = True
            print("üéâ TROUV√â !")
        elif proposition < nombre_secret:
            print("üìà Plus grand !")
        else:
            print("üìâ Plus petit !")

    # R√©sultats avanc√©s
    score = calculer_score(tentatives if gagne else max_tentatives + 1, max_tentatives)

    print(f"\nüéØ === R√âSULTATS AVANC√âS ===")
    print(f"Nombre secret : {nombre_secret}")
    print(f"Tentatives : {tentatives}/{max_tentatives}")
    print(f"Score : {score}/100")

    if gagne:
        efficacite = (difficulte_theorique / tentatives) * 100
        print(f"Efficacit√© : {efficacite:.1f}% (optimal = {difficulte_theorique} tentatives)")

def mode_tournoi():
    """Mode tournoi avec plusieurs manches."""
    print("üèÜ === MODE TOURNOI ===")

    try:
        nb_manches = int(input("Nombre de manches (3-10) : "))
        if not 3 <= nb_manches <= 10:
            print("‚ùå Nombre de manches invalide")
            return
    except ValueError:
        print("‚ùå Entr√©e invalide")
        return

    score_total = 0
    manches_gagnees = 0

    for manche in range(1, nb_manches + 1):
        print(f"\nüéØ === MANCHE {manche}/{nb_manches} ===")

        # Configuration de la manche
        if manche <= 3:
            min_nb, max_nb, max_tent = 1, 20, 5
        elif manche <= 6:
            min_nb, max_nb, max_tent = 1, 50, 6
        else:
            min_nb, max_nb, max_tent = 1, 100, 7

        print(f"Plage : {min_nb}-{max_nb}, Tentatives : {max_tent}")

        # Jouer la manche
        nombre_secret = random.randint(min_nb, max_nb)
        tentatives = 0
        gagne = False

        while tentatives < max_tent and not gagne:
            tentatives += 1

            try:
                proposition = int(input(f"Tentative {tentatives}/{max_tent} : "))
            except ValueError:
                print("‚ùå Nombre invalide")
                tentatives -= 1
                continue
            except KeyboardInterrupt:
                print("\n‚èπÔ∏è Tournoi abandonn√©")
                return

            if proposition == nombre_secret:
                gagne = True
                print("üéâ Trouv√© !")
            elif proposition < nombre_secret:
                print("üìà Plus grand !")
            else:
                print("üìâ Plus petit !")

        # Score de la manche
        score_manche = calculer_score(tentatives if gagne else max_tent + 1, max_tent)
        score_total += score_manche

        if gagne:
            manches_gagnees += 1
            print(f"‚úÖ Manche gagn√©e ! Score : {score_manche}/100")
        else:
            print(f"‚ùå Manche perdue. Le nombre √©tait {nombre_secret}")
            print(f"Score : {score_manche}/100")

        print(f"üìä Score total actuel : {score_total}")

    # R√©sultats du tournoi
    score_moyen = score_total / nb_manches

    print(f"\nüèÜ === R√âSULTATS DU TOURNOI ===")
    print(f"Manches gagn√©es : {manches_gagnees}/{nb_manches}")
    print(f"Score total : {score_total}")
    print(f"Score moyen : {score_moyen:.1f}/100")

    if manches_gagnees == nb_manches:
        print("üèÜ PARFAIT ! Toutes les manches gagn√©es !")
    elif manches_gagnees >= nb_manches * 0.8:
        print("ü•à Excellent tournoi !")
    elif manches_gagnees >= nb_manches * 0.6:
        print("ü•â Bon tournoi !")
    else:
        print("üí™ Entra√Ænez-vous encore !")

def mode_cooperatif():
    """Mode coop√©ratif √† deux joueurs."""
    print("üë• === MODE COOP√âRATIF ===")
    print("Deux joueurs essaient de deviner ensemble !")

    joueur1 = input("Nom du joueur 1 : ").strip() or "Joueur 1"
    joueur2 = input("Nom du joueur 2 : ").strip() or "Joueur 2"

    nombre_secret = random.randint(1, 50)
    max_tentatives = 8
    tentatives = 0
    gagne = False
    joueur_actuel = joueur1

    print(f"\nüéÆ {joueur1} et {joueur2} vs l'ordinateur !")
    print(f"Nombre secret entre 1 et 50, {max_tentatives} tentatives maximum")

    while tentatives < max_tentatives and not gagne:
        tentatives += 1

        print(f"\n--- Tentative {tentatives}/{max_tentatives} ---")
        print(f"üéØ Au tour de {joueur_actuel}")

        try:
            proposition = int(input("Votre proposition : "))
        except ValueError:
            print("‚ùå Nombre invalide")
            tentatives -= 1
            continue
        except KeyboardInterrupt:
            print("\n‚èπÔ∏è Jeu abandonn√©")
            return

        if proposition == nombre_secret:
            gagne = True
            print(f"üéâ {joueur_actuel} a trouv√© !")
            print(f"üèÜ Victoire de l'√©quipe {joueur1} & {joueur2} !")
        elif proposition < nombre_secret:
            print("üìà Plus grand !")
        else:
            print("üìâ Plus petit !")

        # Alterner les joueurs
        joueur_actuel = joueur2 if joueur_actuel == joueur1 else joueur1

    if not gagne:
        print(f"üòû D√©faite ! Le nombre √©tait {nombre_secret}")

    score = calculer_score(tentatives if gagne else max_tentatives + 1, max_tentatives)
    print(f"üìä Score de l'√©quipe : {score}/100")

def mode_statistiques():
    """Mode avec analyse statistique des parties."""
    print("üìä === MODE STATISTIQUES ===")

    nb_parties = 0
    parties_gagnees = 0
    total_tentatives = 0
    meilleur_score = 0

    while True:
        print(f"\nüéØ === PARTIE {nb_parties + 1} ===")

        # Jouer une partie
        nombre_secret = random.randint(1, 50)
        max_tentatives = 6
        tentatives = 0
        gagne = False

        while tentatives < max_tentatives and not gagne:
            tentatives += 1

            try:
                proposition = int(input(f"Tentative {tentatives}/{max_tentatives} : "))
            except ValueError:
                print("‚ùå Nombre invalide")
                tentatives -= 1
                continue
            except KeyboardInterrupt:
                print("\n‚èπÔ∏è Session termin√©e")
                break

            if proposition == nombre_secret:
                gagne = True
                print("üéâ Trouv√© !")
            elif proposition < nombre_secret:
                print("üìà Plus grand !")
            else:
                print("üìâ Plus petit !")

        if not gagne:
            print(f"üòû Rat√© ! C'√©tait {nombre_secret}")

        # Mettre √† jour les statistiques
        nb_parties += 1
        total_tentatives += tentatives

        if gagne:
            parties_gagnees += 1
            score = calculer_score(tentatives, max_tentatives)
            meilleur_score = max(meilleur_score, score)

        # Afficher les statistiques actuelles
        pourcentage_reussite = (parties_gagnees / nb_parties) * 100
        moyenne_tentatives = total_tentatives / nb_parties

        print(f"\nüìä === STATISTIQUES ACTUELLES ===")
        print(f"Parties jou√©es : {nb_parties}")
        print(f"Parties gagn√©es : {parties_gagnees} ({pourcentage_reussite:.1f}%)")
        print(f"Moyenne tentatives : {moyenne_tentatives:.1f}")
        print(f"Meilleur score : {meilleur_score}/100")

        # Continuer ?
        if input("\nAutre partie ? (o/n) : ").lower() not in ['o', 'oui', 'y', 'yes']:
            break

    # Statistiques finales
    if nb_parties > 0:
        print(f"\nüéØ === STATISTIQUES FINALES ===")
        print(f"Total parties : {nb_parties}")
        print(f"Taux de r√©ussite : {pourcentage_reussite:.1f}%")
        print(f"Moyenne tentatives : {moyenne_tentatives:.1f}")
        print(f"Meilleur score : {meilleur_score}/100")

        # √âvaluation
        if pourcentage_reussite >= 80:
            print("üèÜ Expert du plus ou moins !")
        elif pourcentage_reussite >= 60:
            print("ü•à Tr√®s bon joueur !")
        elif pourcentage_reussite >= 40:
            print("ü•â Joueur correct !")
        else:
            print("üí™ Continuez √† vous entra√Æner !")

def menu_principal():
    """Menu principal avec toutes les variantes."""
    while True:
        print("\n" + "="*50)
        print("üéØ JEU DU PLUS OU MOINS - MENU PRINCIPAL")
        print("="*50)
        print("1. üéÆ Jeu classique")
        print("2. ‚öôÔ∏è  Jeu avanc√© (configuration)")
        print("3. üèÜ Mode tournoi")
        print("4. üë• Mode coop√©ratif")
        print("5. üìä Mode avec statistiques")
        print("6. üéØ R√®gles du jeu")
        print("7. ‚ùå Quitter")

        choix = input("\nVotre choix (1-7) : ").strip()

        if choix == "1":
            main()
        elif choix == "2":
            version_avancee()
        elif choix == "3":
            mode_tournoi()
        elif choix == "4":
            mode_cooperatif()
        elif choix == "5":
            mode_statistiques()
        elif choix == "6":
            afficher_regles()
        elif choix == "7":
            print("üëã Merci d'avoir jou√© au Plus ou Moins !")
            print("√Ä bient√¥t pour de nouvelles parties ! üéØ")
            break
        else:
            print("‚ùå Choix invalide")

def afficher_regles():
    """Affiche les r√®gles du jeu."""
    print("\nüìñ === R√àGLES DU JEU ===")
    print("üéØ Objectif :")
    print("   Deviner le nombre secret choisi par l'ordinateur")

    print("\nüéÆ D√©roulement :")
    print("   1. L'ordinateur choisit un nombre dans une plage donn√©e")
    print("   2. Vous proposez un nombre")
    print("   3. L'ordinateur dit 'plus grand' ou 'plus petit'")
    print("   4. Vous continuez jusqu'√† trouver ou √©puiser vos tentatives")

    print("\n‚≠ê Score :")
    print("   ‚Ä¢ 1 tentative = 100 points")
    print("   ‚Ä¢ 2 tentatives = 85 points")
    print("   ‚Ä¢ 3 tentatives = 70 points")
    print("   ‚Ä¢ Et ainsi de suite...")

    print("\nüí° Strat√©gie optimale :")
    print("   ‚Ä¢ Utilisez la m√©thode de dichotomie")
    print("   ‚Ä¢ Divisez toujours la plage par 2")
    print("   ‚Ä¢ Exemple : pour 1-50, commencez par 25")

    print("\nüî• Indices de proximit√© :")
    print("   ‚Ä¢ 'Tr√®s proche' = √©cart ‚â§ 2")
    print("   ‚Ä¢ 'Proche' = √©cart ‚â§ 5")
    print("   ‚Ä¢ 'Vous vous rapprochez' = √©cart ‚â§ 10")

if __name__ == "__main__":
    menu_principal()
```

## Tests √† effectuer

### Tests de base
1. **G√©n√©ration du nombre secret** :
   - V√©rifier qu'il est dans la plage 1-50
   - Tester plusieurs g√©n√©rations

2. **Logique de jeu** :
   - Proposition = nombre secret ‚Üí "Trouv√©"
   - Proposition < nombre secret ‚Üí "Plus grand"
   - Proposition > nombre secret ‚Üí "Plus petit"

3. **Limite de tentatives** :
   - Jeu s'arr√™te apr√®s 6 tentatives
   - Score calcul√© correctement

4. **Validation des entr√©es** :
   - Nombres valides accept√©s
   - Texte rejet√© avec message d'erreur
   - Gestion de Ctrl+C

### Tests avanc√©s
5. **Calcul du score** :
   - 1 tentative = 100 points
   - 6 tentatives = 25 points
   - √âchec = 0 points

6. **Modes sp√©ciaux** :
   - Tournoi : plusieurs manches avec difficult√© croissante
   - Coop√©ratif : alternance entre joueurs
   - Statistiques : calculs corrects sur plusieurs parties

## Concepts abord√©s

### 1. Module random
```python
import random
nombre_secret = random.randint(1, 50)
```

### 2. Boucle while avec condition
```python
while tentatives < MAX_TENTATIVES and not gagne:
    # Jeu continue
```

### 3. Structures conditionnelles imbriqu√©es
```python
if proposition == nombre_secret:
    gagne = True
elif proposition < nombre_secret:
    print("Plus grand")
else:
    print("Plus petit")
```

### 4. Gestion d'√©tat de jeu
```python
tentatives = 0
gagne = False
propositions_precedentes = []
```

## Crit√®res d'√©valuation

- ‚úÖ **Logique de jeu correcte** : Comparaisons et indices appropri√©s
- ‚úÖ **Boucle de jeu fonctionnelle** : Conditions de sortie respect√©es
- ‚úÖ **G√©n√©ration al√©atoire** : Utilisation correcte du module random
- ‚úÖ **Validation des entr√©es** : Gestion des erreurs utilisateur
- ‚úÖ **Calcul de score** : Formule coh√©rente et motivante
- ‚úÖ **Interface utilisateur** : Messages clairs et progression visible
- ‚úÖ **Gestion des cas limites** : Interruption, valeurs extr√™mes

## Extensions possibles

- Intelligence artificielle qui apprend des patterns du joueur
- Mode o√π l'utilisateur choisit et l'ordinateur devine
- Statistiques avanc√©es avec graphiques
- Mode multijoueur en r√©seau
- Diff√©rents niveaux de difficult√© avec plages variables
- Sauvegarde des meilleurs scores
- Interface graphique avec animations
