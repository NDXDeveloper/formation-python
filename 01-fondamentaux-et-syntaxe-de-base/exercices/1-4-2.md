# Exercice 1.4.2 : Convertisseur d'unitÃ©s

## Objectif

CrÃ©er un systÃ¨me de conversion d'unitÃ©s avec menu interactif pour comprendre l'organisation du code en fonctions et l'interaction utilisateur.

## Cahier des charges

1. **celsius_vers_fahrenheit(celsius)** â†’ Conversion de tempÃ©rature
2. **fahrenheit_vers_celsius(fahrenheit)** â†’ Conversion inverse
3. **metres_vers_pieds(metres)** â†’ Conversion de longueur
4. **pieds_vers_metres(pieds)** â†’ Conversion inverse
5. **km_vers_miles(km)** â†’ Conversion de distance
6. **miles_vers_km(miles)** â†’ Conversion inverse
7. **Menu interactif** pour utiliser toutes les fonctions

## Code de base Ã  complÃ©ter

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Exercice 1.4.2 : Convertisseur d'unitÃ©s
Module 1.4 - Fonctions et portÃ©e des variables
"""

def celsius_vers_fahrenheit(celsius):
    """
    Convertit des degrÃ©s Celsius en Fahrenheit.

    Args:
        celsius (float): TempÃ©rature en Celsius

    Returns:
        float: TempÃ©rature en Fahrenheit
    """
    # Formule: F = (C Ã— 9/5) + 32
    # TODO: ImplÃ©menter la fonction
    pass

def fahrenheit_vers_celsius(fahrenheit):
    """
    Convertit des degrÃ©s Fahrenheit en Celsius.

    Args:
        fahrenheit (float): TempÃ©rature en Fahrenheit

    Returns:
        float: TempÃ©rature en Celsius
    """
    # Formule: C = (F - 32) Ã— 5/9
    # TODO: ImplÃ©menter la fonction
    pass

def metres_vers_pieds(metres):
    """
    Convertit des mÃ¨tres en pieds.

    Args:
        metres (float): Distance en mÃ¨tres

    Returns:
        float: Distance en pieds
    """
    # 1 mÃ¨tre = 3.28084 pieds
    # TODO: ImplÃ©menter la fonction
    pass

def pieds_vers_metres(pieds):
    """
    Convertit des pieds en mÃ¨tres.

    Args:
        pieds (float): Distance en pieds

    Returns:
        float: Distance en mÃ¨tres
    """
    # TODO: ImplÃ©menter la fonction
    pass

def km_vers_miles(km):
    """
    Convertit des kilomÃ¨tres en miles.

    Args:
        km (float): Distance en kilomÃ¨tres

    Returns:
        float: Distance en miles
    """
    # 1 km = 0.621371 miles
    # TODO: ImplÃ©menter la fonction
    pass

def miles_vers_km(miles):
    """
    Convertit des miles en kilomÃ¨tres.

    Args:
        miles (float): Distance en miles

    Returns:
        float: Distance en kilomÃ¨tres
    """
    # TODO: ImplÃ©menter la fonction
    pass

def main():
    """Fonction principale avec menu interactif."""
    print("ğŸ”„ === CONVERTISSEUR D'UNITÃ‰S ===")

    while True:
        # TODO: CrÃ©er le menu interactif
        pass

if __name__ == "__main__":
    main()
```

## Solution complÃ¨te

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Exercice 1.4.2 : Convertisseur d'unitÃ©s - SOLUTION
Module 1.4 - Fonctions et portÃ©e des variables
"""

# Constantes globales pour les facteurs de conversion
METRES_VERS_PIEDS = 3.28084
KM_VERS_MILES = 0.621371

def celsius_vers_fahrenheit(celsius):
    """
    Convertit des degrÃ©s Celsius en Fahrenheit.

    Args:
        celsius (float): TempÃ©rature en Celsius

    Returns:
        float: TempÃ©rature en Fahrenheit

    Example:
        >>> celsius_vers_fahrenheit(0)
        32.0
        >>> celsius_vers_fahrenheit(100)
        212.0
    """
    return (celsius * 9/5) + 32

def fahrenheit_vers_celsius(fahrenheit):
    """
    Convertit des degrÃ©s Fahrenheit en Celsius.

    Args:
        fahrenheit (float): TempÃ©rature en Fahrenheit

    Returns:
        float: TempÃ©rature en Celsius

    Example:
        >>> fahrenheit_vers_celsius(32)
        0.0
        >>> fahrenheit_vers_celsius(212)
        100.0
    """
    return (fahrenheit - 32) * 5/9

def metres_vers_pieds(metres):
    """
    Convertit des mÃ¨tres en pieds.

    Args:
        metres (float): Distance en mÃ¨tres

    Returns:
        float: Distance en pieds

    Example:
        >>> metres_vers_pieds(1)
        3.28084
    """
    return metres * METRES_VERS_PIEDS

def pieds_vers_metres(pieds):
    """
    Convertit des pieds en mÃ¨tres.

    Args:
        pieds (float): Distance en pieds

    Returns:
        float: Distance en mÃ¨tres

    Example:
        >>> pieds_vers_metres(3.28084)
        1.0
    """
    return pieds / METRES_VERS_PIEDS

def km_vers_miles(km):
    """
    Convertit des kilomÃ¨tres en miles.

    Args:
        km (float): Distance en kilomÃ¨tres

    Returns:
        float: Distance en miles

    Example:
        >>> km_vers_miles(1)
        0.621371
    """
    return km * KM_VERS_MILES

def miles_vers_km(miles):
    """
    Convertit des miles en kilomÃ¨tres.

    Args:
        miles (float): Distance en miles

    Returns:
        float: Distance en kilomÃ¨tres

    Example:
        >>> miles_vers_km(1)
        1.609344
    """
    return miles / KM_VERS_MILES

def demander_nombre(message):
    """
    Demande un nombre Ã  l'utilisateur avec validation.

    Args:
        message (str): Message Ã  afficher

    Returns:
        float: Le nombre saisi ou None si annulÃ©
    """
    while True:
        try:
            entree = input(message)
            return float(entree)
        except ValueError:
            print("âŒ Veuillez entrer un nombre valide")
        except KeyboardInterrupt:
            print("\nâ¹ï¸ Saisie annulÃ©e")
            return None

def convertir_temperature():
    """Menu de conversion de tempÃ©rature."""
    print("\nğŸŒ¡ï¸ === CONVERSION DE TEMPÃ‰RATURE ===")
    print("1. Celsius â†’ Fahrenheit")
    print("2. Fahrenheit â†’ Celsius")

    choix = input("Votre choix (1-2) : ").strip()

    if choix == "1":
        celsius = demander_nombre("TempÃ©rature en Celsius : ")
        if celsius is not None:
            fahrenheit = celsius_vers_fahrenheit(celsius)
            print(f"ğŸŒ¡ï¸ {celsius}Â°C = {fahrenheit:.2f}Â°F")

            # Informations contextuelles
            if celsius == 0:
                print("   â„¹ï¸ Point de congÃ©lation de l'eau")
            elif celsius == 100:
                print("   â„¹ï¸ Point d'Ã©bullition de l'eau")
            elif celsius == 37:
                print("   â„¹ï¸ TempÃ©rature corporelle normale")
            elif celsius < 0:
                print("   ğŸ¥¶ En dessous du point de congÃ©lation")
            elif celsius > 100:
                print("   ğŸ”¥ Au-dessus du point d'Ã©bullition")

    elif choix == "2":
        fahrenheit = demander_nombre("TempÃ©rature en Fahrenheit : ")
        if fahrenheit is not None:
            celsius = fahrenheit_vers_celsius(fahrenheit)
            print(f"ğŸŒ¡ï¸ {fahrenheit}Â°F = {celsius:.2f}Â°C")

            # Informations contextuelles
            if fahrenheit == 32:
                print("   â„¹ï¸ Point de congÃ©lation de l'eau")
            elif fahrenheit == 212:
                print("   â„¹ï¸ Point d'Ã©bullition de l'eau")
            elif fahrenheit == 98.6:
                print("   â„¹ï¸ TempÃ©rature corporelle normale")

    else:
        print("âŒ Choix invalide")

def convertir_longueur():
    """Menu de conversion de longueur."""
    print("\nğŸ“ === CONVERSION DE LONGUEUR ===")
    print("1. MÃ¨tres â†’ Pieds")
    print("2. Pieds â†’ MÃ¨tres")

    choix = input("Votre choix (1-2) : ").strip()

    if choix == "1":
        metres = demander_nombre("Distance en mÃ¨tres : ")
        if metres is not None:
            pieds = metres_vers_pieds(metres)
            print(f"ğŸ“ {metres} m = {pieds:.2f} pieds")

            # Comparaisons utiles
            if metres == 1:
                print("   â„¹ï¸ Un mÃ¨tre fait environ 3 pieds et 3 pouces")
            elif metres >= 1000:
                print("   â„¹ï¸ C'est plus d'un kilomÃ¨tre !")

    elif choix == "2":
        pieds = demander_nombre("Distance en pieds : ")
        if pieds is not None:
            metres = pieds_vers_metres(pieds)
            print(f"ğŸ“ {pieds} pieds = {metres:.2f} m")

            # Comparaisons utiles
            if pieds == 1:
                print("   â„¹ï¸ Un pied fait environ 30 cm")
            elif pieds >= 3280:
                print("   â„¹ï¸ C'est plus d'un kilomÃ¨tre !")

    else:
        print("âŒ Choix invalide")

def convertir_distance():
    """Menu de conversion de distance."""
    print("\nğŸ›£ï¸ === CONVERSION DE DISTANCE ===")
    print("1. KilomÃ¨tres â†’ Miles")
    print("2. Miles â†’ KilomÃ¨tres")

    choix = input("Votre choix (1-2) : ").strip()

    if choix == "1":
        km = demander_nombre("Distance en kilomÃ¨tres : ")
        if km is not None:
            miles = km_vers_miles(km)
            print(f"ğŸ›£ï¸ {km} km = {miles:.2f} miles")

            # Exemples parlants
            if km == 1:
                print("   â„¹ï¸ Un kilomÃ¨tre fait environ 0.6 miles")
            elif km >= 100:
                print("   â„¹ï¸ Distance d'un long trajet en voiture")
            elif km >= 42.195:
                print("   â„¹ï¸ Plus qu'un marathon !")

    elif choix == "2":
        miles = demander_nombre("Distance en miles : ")
        if miles is not None:
            km = miles_vers_km(miles)
            print(f"ğŸ›£ï¸ {miles} miles = {km:.2f} km")

            # Exemples parlants
            if miles == 1:
                print("   â„¹ï¸ Un mile fait environ 1.6 km")
            elif miles >= 26.2:
                print("   â„¹ï¸ Plus qu'un marathon !")

    else:
        print("âŒ Choix invalide")

def convertir_multiple():
    """Conversion de la mÃªme valeur vers plusieurs unitÃ©s."""
    print("\nğŸ”„ === CONVERSION MULTIPLE ===")
    print("Convertir une valeur vers plusieurs unitÃ©s")

    print("\nType de conversion :")
    print("1. TempÃ©rature (Celsius vers autres)")
    print("2. Distance (MÃ¨tres vers autres)")

    choix_type = input("Votre choix (1-2) : ").strip()

    if choix_type == "1":
        celsius = demander_nombre("TempÃ©rature en Celsius : ")
        if celsius is not None:
            fahrenheit = celsius_vers_fahrenheit(celsius)
            kelvin = celsius + 273.15  # Bonus : Kelvin

            print(f"\nğŸŒ¡ï¸ Conversions de tempÃ©rature :")
            print(f"   â€¢ {celsius}Â°C")
            print(f"   â€¢ {fahrenheit:.2f}Â°F")
            print(f"   â€¢ {kelvin:.2f}K (Kelvin)")

    elif choix_type == "2":
        metres = demander_nombre("Distance en mÃ¨tres : ")
        if metres is not None:
            pieds = metres_vers_pieds(metres)
            km = metres / 1000
            miles = km_vers_miles(km)
            cm = metres * 100
            mm = metres * 1000

print(f"\nğŸ“ Conversions de distance :")
            print(f"   â€¢ {metres} m")
            print(f"   â€¢ {pieds:.2f} pieds")
            print(f"   â€¢ {km:.6f} km")
            print(f"   â€¢ {miles:.6f} miles")
            print(f"   â€¢ {cm:.0f} cm")
            print(f"   â€¢ {mm:.0f} mm")

    else:
        print("âŒ Choix invalide")

def tester_conversions():
    """Teste toutes les fonctions de conversion avec des valeurs connues."""
    print("\nğŸ§ª === TESTS DES CONVERSIONS ===")

    print("ğŸŒ¡ï¸ Tests de tempÃ©rature :")
    tests_temp = [
        (0, 32),      # Point de congÃ©lation
        (100, 212),   # Point d'Ã©bullition
        (37, 98.6),   # TempÃ©rature corporelle
        (-40, -40)    # Point oÃ¹ C = F
    ]

    for celsius, fahrenheit_attendu in tests_temp:
        fahrenheit_calcule = celsius_vers_fahrenheit(celsius)
        celsius_retour = fahrenheit_vers_celsius(fahrenheit_calcule)

        print(f"   â€¢ {celsius}Â°C â†’ {fahrenheit_calcule:.1f}Â°F (attendu: {fahrenheit_attendu}Â°F)")
        print(f"     Retour: {celsius_retour:.1f}Â°C")

    print("\nğŸ“ Tests de longueur :")
    tests_longueur = [
        (1, 3.28084),
        (10, 32.8084),
        (0, 0)
    ]

    for metres, pieds_attendu in tests_longueur:
        pieds_calcule = metres_vers_pieds(metres)
        metres_retour = pieds_vers_metres(pieds_calcule)

        print(f"   â€¢ {metres} m â†’ {pieds_calcule:.3f} pieds (attendu: {pieds_attendu})")
        print(f"     Retour: {metres_retour:.3f} m")

    print("\nğŸ›£ï¸ Tests de distance :")
    tests_distance = [
        (1, 0.621371),
        (5, 3.106855),
        (10, 6.21371)
    ]

    for km, miles_attendu in tests_distance:
        miles_calcule = km_vers_miles(km)
        km_retour = miles_vers_km(miles_calcule)

        print(f"   â€¢ {km} km â†’ {miles_calcule:.6f} miles (attendu: {miles_attendu})")
        print(f"     Retour: {km_retour:.6f} km")

def historique_conversions():
    """Maintient un historique des conversions effectuÃ©es."""
    historique = []

    print("\nğŸ“š === MODE HISTORIQUE ===")
    print("Les conversions seront enregistrÃ©es dans l'historique")

    while True:
        print("\n1. Effectuer une conversion")
        print("2. Afficher l'historique")
        print("3. Effacer l'historique")
        print("4. Retour au menu principal")

        choix = input("Votre choix (1-4) : ").strip()

        if choix == "1":
            print("\nType de conversion :")
            print("1. TempÃ©rature")
            print("2. Longueur")
            print("3. Distance")

            type_conv = input("Type (1-3) : ").strip()

            if type_conv == "1":
                celsius = demander_nombre("TempÃ©rature en Celsius : ")
                if celsius is not None:
                    fahrenheit = celsius_vers_fahrenheit(celsius)
                    conversion = {
                        'type': 'TempÃ©rature',
                        'valeur_origine': celsius,
                        'unite_origine': 'Â°C',
                        'valeur_convertie': fahrenheit,
                        'unite_convertie': 'Â°F'
                    }
                    historique.append(conversion)
                    print(f"âœ… {celsius}Â°C = {fahrenheit:.2f}Â°F (ajoutÃ© Ã  l'historique)")

            elif type_conv == "2":
                metres = demander_nombre("Distance en mÃ¨tres : ")
                if metres is not None:
                    pieds = metres_vers_pieds(metres)
                    conversion = {
                        'type': 'Longueur',
                        'valeur_origine': metres,
                        'unite_origine': 'm',
                        'valeur_convertie': pieds,
                        'unite_convertie': 'pieds'
                    }
                    historique.append(conversion)
                    print(f"âœ… {metres} m = {pieds:.2f} pieds (ajoutÃ© Ã  l'historique)")

            elif type_conv == "3":
                km = demander_nombre("Distance en kilomÃ¨tres : ")
                if km is not None:
                    miles = km_vers_miles(km)
                    conversion = {
                        'type': 'Distance',
                        'valeur_origine': km,
                        'unite_origine': 'km',
                        'valeur_convertie': miles,
                        'unite_convertie': 'miles'
                    }
                    historique.append(conversion)
                    print(f"âœ… {km} km = {miles:.2f} miles (ajoutÃ© Ã  l'historique)")

        elif choix == "2":
            if not historique:
                print("ğŸ“­ Aucune conversion dans l'historique")
            else:
                print(f"\nğŸ“š Historique des conversions ({len(historique)} conversion(s)) :")
                print("â•" * 60)
                for i, conv in enumerate(historique, 1):
                    print(f"{i:2d}. {conv['type']}: {conv['valeur_origine']} {conv['unite_origine']} â†’ {conv['valeur_convertie']:.2f} {conv['unite_convertie']}")

        elif choix == "3":
            if historique:
                historique.clear()
                print("ğŸ—‘ï¸ Historique effacÃ©")
            else:
                print("ğŸ“­ L'historique est dÃ©jÃ  vide")

        elif choix == "4":
            break

        else:
            print("âŒ Choix invalide")

def calculatrice_conversions():
    """Mode calculatrice pour enchaÃ®ner les conversions."""
    print("\nğŸ§® === CALCULATRICE DE CONVERSIONS ===")
    print("EnchaÃ®nez les conversions Ã  partir d'une valeur de base")

    valeur = demander_nombre("Valeur de dÃ©part : ")
    if valeur is None:
        return

    unite = input("UnitÃ© de dÃ©part (C/F/m/ft/km/mi) : ").strip().lower()

    conversions_possibles = {
        'c': [('F', celsius_vers_fahrenheit)],
        'f': [('C', fahrenheit_vers_celsius)],
        'm': [('ft', metres_vers_pieds), ('km', lambda x: x/1000)],
        'ft': [('m', pieds_vers_metres)],
        'km': [('mi', km_vers_miles), ('m', lambda x: x*1000)],
        'mi': [('km', miles_vers_km)]
    }

    if unite not in conversions_possibles:
        print("âŒ UnitÃ© non reconnue")
        return

    print(f"\nğŸ§® Valeur de base : {valeur} {unite.upper()}")
    print("Conversions disponibles :")

    for i, (unite_cible, fonction) in enumerate(conversions_possibles[unite], 1):
        valeur_convertie = fonction(valeur)
        print(f"   {i}. â†’ {valeur_convertie:.4f} {unite_cible}")

def afficher_formules():
    """Affiche les formules de conversion utilisÃ©es."""
    print("\nğŸ“ === FORMULES DE CONVERSION ===")

    print("ğŸŒ¡ï¸ TempÃ©rature :")
    print("   â€¢ Celsius â†’ Fahrenheit : F = (C Ã— 9/5) + 32")
    print("   â€¢ Fahrenheit â†’ Celsius : C = (F - 32) Ã— 5/9")

    print("\nğŸ“ Longueur :")
    print("   â€¢ MÃ¨tres â†’ Pieds : pieds = mÃ¨tres Ã— 3.28084")
    print("   â€¢ Pieds â†’ MÃ¨tres : mÃ¨tres = pieds Ã· 3.28084")

    print("\nğŸ›£ï¸ Distance :")
    print("   â€¢ KilomÃ¨tres â†’ Miles : miles = km Ã— 0.621371")
    print("   â€¢ Miles â†’ KilomÃ¨tres : km = miles Ã· 0.621371")

    print("\nğŸ’¡ Autres conversions utiles :")
    print("   â€¢ Celsius â†’ Kelvin : K = C + 273.15")
    print("   â€¢ MÃ¨tres â†’ CentimÃ¨tres : cm = m Ã— 100")
    print("   â€¢ MÃ¨tres â†’ MillimÃ¨tres : mm = m Ã— 1000")

def main():
    """Fonction principale avec menu interactif."""
    print("ğŸ”„ === CONVERTISSEUR D'UNITÃ‰S ===")
    print("SystÃ¨me de conversion avec fonctions modulaires")

    while True:
        print("\n" + "â•" * 50)
        print("ğŸ”„ MENU PRINCIPAL".center(50))
        print("â•" * 50)
        print("1. ğŸŒ¡ï¸  Conversion de tempÃ©rature")
        print("2. ğŸ“ Conversion de longueur")
        print("3. ğŸ›£ï¸  Conversion de distance")
        print("4. ğŸ”„ Conversion multiple")
        print("5. ğŸ“š Mode avec historique")
        print("6. ğŸ§® Calculatrice de conversions")
        print("7. ğŸ§ª Tester les conversions")
        print("8. ğŸ“ Afficher les formules")
        print("9. âŒ Quitter")

        choix = input("\nVotre choix (1-9) : ").strip()

        try:
            if choix == "1":
                convertir_temperature()

            elif choix == "2":
                convertir_longueur()

            elif choix == "3":
                convertir_distance()

            elif choix == "4":
                convertir_multiple()

            elif choix == "5":
                historique_conversions()

            elif choix == "6":
                calculatrice_conversions()

            elif choix == "7":
                tester_conversions()

            elif choix == "8":
                afficher_formules()

            elif choix == "9":
                print("\nğŸ‘‹ Merci d'avoir utilisÃ© le convertisseur d'unitÃ©s !")
                print("Ã€ bientÃ´t ! ğŸ”„")
                break

            else:
                print("âŒ Choix invalide. Veuillez entrer un nombre entre 1 et 9.")

        except KeyboardInterrupt:
            print(f"\n\nâ¹ï¸ Programme interrompu par l'utilisateur")
            print("ğŸ‘‹ Au revoir !")
            break

        except Exception as e:
            print(f"âŒ Erreur inattendue : {e}")
            print("ğŸ”„ Retour au menu principal...")

if __name__ == "__main__":
    main()
```

## Tests Ã  effectuer

### Tests des fonctions de base
1. **TempÃ©rature** :
   - 0Â°C â†’ 32Â°F
   - 100Â°C â†’ 212Â°F
   - -40Â°C â†’ -40Â°F (point oÃ¹ C = F)

2. **Longueur** :
   - 1 m â†’ 3.28084 pieds
   - 0 m â†’ 0 pieds
   - Test aller-retour

3. **Distance** :
   - 1 km â†’ 0.621371 miles
   - Test aller-retour

### Tests du menu interactif
- Navigation entre les menus
- Saisie de valeurs invalides
- Interruption clavier (Ctrl+C)
- Historique des conversions

## Concepts abordÃ©s

### 1. Organisation modulaire
- SÃ©paration des fonctions de conversion
- Fonctions d'interface utilisateur
- Menu principal structurÃ©

### 2. Constantes globales
```python
METRES_VERS_PIEDS = 3.28084
KM_VERS_MILES = 0.621371
```

### 3. Validation d'entrÃ©e
```python
def demander_nombre(message):
    while True:
        try:
            return float(input(message))
        except ValueError:
            print("Nombre invalide")
```

### 4. Gestion d'erreurs
- `try/except` pour la saisie
- Gestion de `KeyboardInterrupt`

## CritÃ¨res d'Ã©valuation

- âœ… **Fonctions de conversion correctes** : Formules mathÃ©matiques exactes
- âœ… **Menu interactif fonctionnel** : Navigation claire
- âœ… **Validation des entrÃ©es** : Gestion des erreurs de saisie
- âœ… **Code modulaire** : SÃ©paration des responsabilitÃ©s
- âœ… **Interface utilisateur** : Messages clairs et informatifs
- âœ… **Tests complets** : Validation avec valeurs connues
- âœ… **FonctionnalitÃ©s avancÃ©es** : Historique, conversion multiple

## Extensions possibles

- Support d'autres unitÃ©s (yards, pouces, etc.)
- Conversion de volume (litres, gallons)
- Conversion de poids (kg, livres)
- Sauvegarde de l'historique dans un fichier
- Interface graphique
