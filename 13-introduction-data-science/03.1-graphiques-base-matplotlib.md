üîù Retour au [Sommaire](/SOMMAIRE.md)

# 13.3.1 Graphiques de base avec Matplotlib

## Introduction

Matplotlib est la biblioth√®que de visualisation de donn√©es la plus populaire en Python. Elle permet de cr√©er une grande vari√©t√© de graphiques statiques, anim√©s et interactifs. Dans ce chapitre, nous allons d√©couvrir les bases de Matplotlib et apprendre √† cr√©er les graphiques les plus courants.

## Installation de Matplotlib

Avant de commencer, assurez-vous que Matplotlib est install√© :

```bash
pip install matplotlib
```

## Importation de la biblioth√®que

La convention standard pour importer Matplotlib est la suivante :

```python
import matplotlib.pyplot as plt
import numpy as np  # Souvent utilis√© avec Matplotlib
```

`pyplot` est le module de Matplotlib qui fournit une interface simple pour cr√©er des graphiques.

## Anatomie d'un graphique Matplotlib

Avant de cr√©er nos premiers graphiques, il est important de comprendre la structure de base :

- **Figure** : C'est la fen√™tre ou la page enti√®re o√π tout est dessin√©
- **Axes** : Ce sont les zones de trac√© o√π vos donn√©es sont affich√©es (un graphique peut contenir plusieurs axes)
- **Axis** : Les axes x et y avec leurs graduations et √©tiquettes

```python
# Cr√©ation d'une figure et d'un axe
fig, ax = plt.subplots()
# fig est la figure enti√®re
# ax est l'axe o√π on trace nos donn√©es
```

## 1. Graphique en ligne (Line Plot)

Le graphique en ligne est le type de graphique le plus basique et le plus utilis√©. Il est id√©al pour visualiser l'√©volution d'une variable dans le temps.

### Exemple simple

```python
import matplotlib.pyplot as plt

# Donn√©es
x = [1, 2, 3, 4, 5]
y = [2, 4, 6, 8, 10]

# Cr√©ation du graphique
plt.plot(x, y)
plt.xlabel('Axe X')
plt.ylabel('Axe Y')
plt.title('Mon premier graphique')
plt.show()
```

### Personnalisation du graphique en ligne

```python
import matplotlib.pyplot as plt
import numpy as np

# Donn√©es
x = np.linspace(0, 10, 100)  # 100 points entre 0 et 10
y = np.sin(x)

# Cr√©ation du graphique avec personnalisation
plt.figure(figsize=(10, 6))  # Taille de la figure
plt.plot(x, y, color='blue', linewidth=2, linestyle='-', label='sin(x)')
plt.plot(x, np.cos(x), color='red', linewidth=2, linestyle='--', label='cos(x)')

# Personnalisation
plt.xlabel('X')
plt.ylabel('Y')
plt.title('Fonctions trigonom√©triques')
plt.legend()  # Affiche la l√©gende
plt.grid(True)  # Affiche la grille
plt.show()
```

**Options de style de ligne courantes :**
- `'-'` : ligne continue (par d√©faut)
- `'--'` : ligne pointill√©e
- `'-.'` : ligne point-tiret
- `':'` : ligne en pointill√©s
- `'o'` : marqueurs ronds
- `'s'` : marqueurs carr√©s
- `'^'` : marqueurs triangulaires

## 2. Diagramme √† barres (Bar Chart)

Les diagrammes √† barres sont parfaits pour comparer des cat√©gories diff√©rentes.

### Barres verticales

```python
import matplotlib.pyplot as plt

# Donn√©es
categories = ['Produit A', 'Produit B', 'Produit C', 'Produit D']
valeurs = [23, 45, 56, 78]

# Cr√©ation du graphique
plt.figure(figsize=(10, 6))
plt.bar(categories, valeurs, color='skyblue', edgecolor='navy')
plt.xlabel('Produits')
plt.ylabel('Ventes')
plt.title('Ventes par produit')
plt.show()
```

### Barres horizontales

```python
import matplotlib.pyplot as plt

# Donn√©es
categories = ['Produit A', 'Produit B', 'Produit C', 'Produit D']
valeurs = [23, 45, 56, 78]

# Cr√©ation du graphique
plt.figure(figsize=(10, 6))
plt.barh(categories, valeurs, color='lightcoral')
plt.xlabel('Ventes')
plt.ylabel('Produits')
plt.title('Ventes par produit (horizontal)')
plt.show()
```

### Barres group√©es

```python
import matplotlib.pyplot as plt
import numpy as np

# Donn√©es
categories = ['Q1', 'Q2', 'Q3', 'Q4']
ventes_2023 = [20, 35, 30, 35]
ventes_2024 = [25, 32, 34, 40]

# Position des barres
x = np.arange(len(categories))
largeur = 0.35

# Cr√©ation du graphique
fig, ax = plt.subplots(figsize=(10, 6))
barres1 = ax.bar(x - largeur/2, ventes_2023, largeur, label='2023', color='steelblue')
barres2 = ax.bar(x + largeur/2, ventes_2024, largeur, label='2024', color='orange')

# Personnalisation
ax.set_xlabel('Trimestre')
ax.set_ylabel('Ventes (en milliers)')
ax.set_title('Comparaison des ventes 2023 vs 2024')
ax.set_xticks(x)
ax.set_xticklabels(categories)
ax.legend()

plt.show()
```

## 3. Nuage de points (Scatter Plot)

Les nuages de points sont utilis√©s pour visualiser la relation entre deux variables continues.

### Exemple basique

```python
import matplotlib.pyplot as plt
import numpy as np

# Donn√©es
x = np.random.rand(50) * 100
y = np.random.rand(50) * 100

# Cr√©ation du graphique
plt.figure(figsize=(10, 6))
plt.scatter(x, y, c='purple', alpha=0.5, s=100)
plt.xlabel('Variable X')
plt.ylabel('Variable Y')
plt.title('Nuage de points')
plt.grid(True, alpha=0.3)
plt.show()
```

**Param√®tres importants :**
- `s` : taille des points
- `c` : couleur des points
- `alpha` : transparence (0 = transparent, 1 = opaque)
- `marker` : forme des marqueurs

### Nuage de points avec couleurs et tailles variables

```python
import matplotlib.pyplot as plt
import numpy as np

# Donn√©es
n = 50
x = np.random.rand(n) * 100
y = np.random.rand(n) * 100
couleurs = np.random.rand(n)
tailles = np.random.rand(n) * 1000

# Cr√©ation du graphique
plt.figure(figsize=(10, 6))
scatter = plt.scatter(x, y, c=couleurs, s=tailles, alpha=0.5, cmap='viridis')
plt.colorbar(scatter, label='Intensit√©')
plt.xlabel('Variable X')
plt.ylabel('Variable Y')
plt.title('Nuage de points avec couleurs et tailles variables')
plt.show()
```

## 4. Histogramme

Les histogrammes permettent de visualiser la distribution d'une variable num√©rique.

### Exemple simple

```python
import matplotlib.pyplot as plt
import numpy as np

# Donn√©es : distribution normale
data = np.random.randn(1000)

# Cr√©ation de l'histogramme
plt.figure(figsize=(10, 6))
plt.hist(data, bins=30, color='steelblue', edgecolor='black', alpha=0.7)
plt.xlabel('Valeur')
plt.ylabel('Fr√©quence')
plt.title('Histogramme d\'une distribution normale')
plt.grid(True, alpha=0.3)
plt.show()
```

**Param√®tres importants :**
- `bins` : nombre de barres (intervalles)
- `edgecolor` : couleur des bordures
- `alpha` : transparence

### Histogrammes multiples

```python
import matplotlib.pyplot as plt
import numpy as np

# Donn√©es
data1 = np.random.normal(100, 15, 1000)
data2 = np.random.normal(120, 15, 1000)

# Cr√©ation du graphique
plt.figure(figsize=(10, 6))
plt.hist(data1, bins=30, alpha=0.5, label='Groupe A', color='blue')
plt.hist(data2, bins=30, alpha=0.5, label='Groupe B', color='red')
plt.xlabel('Valeur')
plt.ylabel('Fr√©quence')
plt.title('Comparaison de deux distributions')
plt.legend()
plt.show()
```

## 5. Diagramme circulaire (Pie Chart)

Les diagrammes circulaires sont utilis√©s pour montrer des proportions ou des pourcentages.

### Exemple simple

```python
import matplotlib.pyplot as plt

# Donn√©es
labels = ['Python', 'JavaScript', 'Java', 'C++', 'Autres']
tailles = [30, 25, 20, 15, 10]

# Cr√©ation du graphique
plt.figure(figsize=(8, 8))
plt.pie(tailles, labels=labels, autopct='%1.1f%%', startangle=90)
plt.title('Langages de programmation les plus utilis√©s')
plt.show()
```

**Param√®tres importants :**
- `autopct` : format d'affichage des pourcentages
- `startangle` : angle de d√©part (en degr√©s)
- `explode` : distance pour d√©tacher une portion

### Diagramme circulaire avec personnalisation

```python
import matplotlib.pyplot as plt

# Donn√©es
labels = ['Python', 'JavaScript', 'Java', 'C++', 'Autres']
tailles = [30, 25, 20, 15, 10]
couleurs = ['#ff9999', '#66b3ff', '#99ff99', '#ffcc99', '#ff99cc']
explode = (0.1, 0, 0, 0, 0)  # "Explose" la premi√®re portion

# Cr√©ation du graphique
plt.figure(figsize=(10, 8))
plt.pie(tailles, explode=explode, labels=labels, colors=couleurs,
        autopct='%1.1f%%', shadow=True, startangle=90)
plt.title('Langages de programmation les plus utilis√©s', fontsize=16)
plt.axis('equal')  # Assure un cercle parfait
plt.show()
```

## 6. Subplots : Plusieurs graphiques dans une m√™me figure

Matplotlib permet de cr√©er plusieurs graphiques dans une m√™me figure avec `subplots()`.

### Grille de graphiques

```python
import matplotlib.pyplot as plt
import numpy as np

# Donn√©es
x = np.linspace(0, 10, 100)

# Cr√©ation d'une figure avec 4 sous-graphiques (2 lignes, 2 colonnes)
fig, axes = plt.subplots(2, 2, figsize=(12, 10))

# Premier graphique (ligne)
axes[0, 0].plot(x, np.sin(x))
axes[0, 0].set_title('Graphique en ligne')

# Deuxi√®me graphique (barres)
axes[0, 1].bar(['A', 'B', 'C', 'D'], [3, 7, 2, 5])
axes[0, 1].set_title('Diagramme √† barres')

# Troisi√®me graphique (scatter)
axes[1, 0].scatter(np.random.rand(50), np.random.rand(50))
axes[1, 0].set_title('Nuage de points')

# Quatri√®me graphique (histogramme)
axes[1, 1].hist(np.random.randn(1000), bins=30)
axes[1, 1].set_title('Histogramme')

# Ajustement de l'espacement
plt.tight_layout()
plt.show()
```

## 7. Personnalisation avanc√©e

### Styles pr√©d√©finis

Matplotlib propose des styles pr√©d√©finis pour changer rapidement l'apparence de vos graphiques :

```python
import matplotlib.pyplot as plt
import numpy as np

# Liste des styles disponibles
print(plt.style.available)

# Utilisation d'un style
plt.style.use('seaborn-v0_8-darkgrid')

# Cr√©ation d'un graphique
x = np.linspace(0, 10, 100)
plt.figure(figsize=(10, 6))
plt.plot(x, np.sin(x))
plt.title('Graphique avec style personnalis√©')
plt.show()
```

**Styles populaires :**
- `'default'` : style par d√©faut
- `'seaborn-v0_8-darkgrid'` : grille sombre
- `'ggplot'` : style ggplot (de R)
- `'fivethirtyeight'` : style du site FiveThirtyEight

### Sauvegarde des graphiques

Pour sauvegarder un graphique au lieu de l'afficher :

```python
import matplotlib.pyplot as plt
import numpy as np

x = np.linspace(0, 10, 100)
plt.figure(figsize=(10, 6))
plt.plot(x, np.sin(x))
plt.title('Mon graphique')

# Sauvegarde
plt.savefig('mon_graphique.png', dpi=300, bbox_inches='tight')
# dpi : r√©solution (dots per inch)
# bbox_inches='tight' : supprime les marges blanches
```

**Formats support√©s :** PNG, PDF, SVG, JPG, etc.

## 8. Bonnes pratiques

1. **Toujours √©tiqueter vos axes** : `xlabel()` et `ylabel()`
2. **Ajouter un titre explicite** : `title()`
3. **Utiliser des l√©gendes** quand vous avez plusieurs s√©ries : `legend()`
4. **Choisir des couleurs adapt√©es** et accessibles
5. **Ajuster la taille de la figure** pour une meilleure lisibilit√© : `figsize=(largeur, hauteur)`
6. **Utiliser `plt.tight_layout()`** pour √©viter les chevauchements
7. **Sauvegarder en haute r√©solution** pour les publications : `dpi=300`

## Exemple complet : Analyse de donn√©es

Voici un exemple complet qui combine plusieurs concepts :

```python
import matplotlib.pyplot as plt
import numpy as np

# G√©n√©ration de donn√©es
np.random.seed(42)
mois = ['Jan', 'F√©v', 'Mar', 'Avr', 'Mai', 'Jun',
        'Jul', 'Ao√ª', 'Sep', 'Oct', 'Nov', 'D√©c']
ventes = np.random.randint(50, 150, 12)
objectifs = np.full(12, 100)

# Cr√©ation de la figure avec subplots
fig, axes = plt.subplots(2, 2, figsize=(15, 10))
fig.suptitle('Tableau de bord des ventes annuelles', fontsize=16, fontweight='bold')

# 1. Graphique en ligne : √âvolution des ventes
axes[0, 0].plot(mois, ventes, marker='o', linewidth=2, color='steelblue', label='Ventes r√©elles')
axes[0, 0].plot(mois, objectifs, linestyle='--', color='red', label='Objectif')
axes[0, 0].set_title('√âvolution mensuelle des ventes')
axes[0, 0].set_xlabel('Mois')
axes[0, 0].set_ylabel('Ventes')
axes[0, 0].legend()
axes[0, 0].grid(True, alpha=0.3)

# 2. Diagramme √† barres : Ventes par mois
couleurs_barres = ['green' if v >= 100 else 'orange' for v in ventes]
axes[0, 1].bar(mois, ventes, color=couleurs_barres, alpha=0.7)
axes[0, 1].axhline(y=100, color='red', linestyle='--', label='Objectif')
axes[0, 1].set_title('Ventes mensuelles')
axes[0, 1].set_xlabel('Mois')
axes[0, 1].set_ylabel('Ventes')
axes[0, 1].legend()

# 3. Histogramme : Distribution des ventes
axes[1, 0].hist(ventes, bins=8, color='purple', alpha=0.7, edgecolor='black')
axes[1, 0].axvline(x=np.mean(ventes), color='red', linestyle='--',
                   linewidth=2, label=f'Moyenne: {np.mean(ventes):.1f}')
axes[1, 0].set_title('Distribution des ventes')
axes[1, 0].set_xlabel('Ventes')
axes[1, 0].set_ylabel('Fr√©quence')
axes[1, 0].legend()

# 4. Diagramme circulaire : R√©partition par trimestre
q1 = sum(ventes[0:3])
q2 = sum(ventes[3:6])
q3 = sum(ventes[6:9])
q4 = sum(ventes[9:12])
trimestres = ['Q1', 'Q2', 'Q3', 'Q4']
ventes_trimestres = [q1, q2, q3, q4]
axes[1, 1].pie(ventes_trimestres, labels=trimestres, autopct='%1.1f%%',
               startangle=90, colors=['#ff9999', '#66b3ff', '#99ff99', '#ffcc99'])
axes[1, 1].set_title('R√©partition par trimestre')

# Ajustement et affichage
plt.tight_layout()
plt.show()
```

## Conclusion

Matplotlib est un outil puissant et flexible pour cr√©er des visualisations en Python. Les types de graphiques que nous avons vus dans ce chapitre couvrent la majorit√© des besoins courants :

- **Graphiques en ligne** : pour les tendances et √©volutions
- **Diagrammes √† barres** : pour comparer des cat√©gories
- **Nuages de points** : pour visualiser des relations
- **Histogrammes** : pour les distributions
- **Diagrammes circulaires** : pour les proportions

Dans le prochain chapitre, nous d√©couvrirons **Plotly**, qui permet de cr√©er des visualisations interactives.

## Ressources suppl√©mentaires

- [Documentation officielle de Matplotlib](https://matplotlib.org/stable/contents.html)
- [Galerie d'exemples Matplotlib](https://matplotlib.org/stable/gallery/index.html)
- [Cheat Sheet Matplotlib](https://github.com/matplotlib/cheatsheets)

‚è≠Ô∏è [Visualisations interactives avec Plotly](/13-introduction-data-science/03.2-visualisations-interactives-plotly.md)
